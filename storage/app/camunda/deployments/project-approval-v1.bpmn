<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="1.10.0">
  <bpmn:collaboration id="Collaboration_1owbzst">
    <bpmn:participant id="Participant_02hnwqb" processRef="project-approval" />
  </bpmn:collaboration>
  <bpmn:process id="project-approval" name="Project Approval" isExecutable="true" camunda:historyTimeToLive="P30D">
    <bpmn:laneSet>
      <bpmn:lane id="Lane_0xteu9y" name="SCIC">
        <bpmn:flowNodeRef>assess-architecture-plan</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>assess-business-case</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>architecture-plan-assessment-decision</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>business-case-assessment-decision</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_1h7n5ox" name="Owner">
        <bpmn:flowNodeRef>prepare-architecture-plan</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>prepare-business-case</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>EndEvent_02rck8b</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>StartEvent_1</bpmn:flowNodeRef>
      </bpmn:lane>
    </bpmn:laneSet>
    <bpmn:exclusiveGateway id="business-case-assessment-decision" name="Business Case Assessment Decision?">
      <bpmn:incoming>SequenceFlow_0stz2fj</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1181hdz</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_02678ki</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_0k7m7l1</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_02678ki" name="Rejected" sourceRef="business-case-assessment-decision" targetRef="prepare-business-case">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${decisionFormBusinessCase == constantDecisionFormRejected}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_1181hdz" name="Approved" sourceRef="business-case-assessment-decision" targetRef="prepare-architecture-plan">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${decisionFormBusinessCase == constantDecisionFormApproved}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_0stz2fj" sourceRef="assess-business-case" targetRef="business-case-assessment-decision" />
    <bpmn:sequenceFlow id="SequenceFlow_0k7m7l1" name="Cancelled" sourceRef="business-case-assessment-decision" targetRef="EndEvent_02rck8b">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${decisionFormBusinessCase == constantDecisionFormCancelled}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:exclusiveGateway id="architecture-plan-assessment-decision" name="Architecture Plan Assessment Decision?">
      <bpmn:incoming>SequenceFlow_144rfxb</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_108qq7v</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_0emknjh</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_0rygfql</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:endEvent id="EndEvent_02rck8b" name="">
      <bpmn:incoming>SequenceFlow_108qq7v</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_0rygfql</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_0k7m7l1</bpmn:incoming>
      <bpmn:terminateEventDefinition />
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="SequenceFlow_144rfxb" sourceRef="assess-architecture-plan" targetRef="architecture-plan-assessment-decision" />
    <bpmn:sequenceFlow id="SequenceFlow_108qq7v" name="Approved" sourceRef="architecture-plan-assessment-decision" targetRef="EndEvent_02rck8b">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${decisionFormArchitecturePlan == constantDecisionFormApproved}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_0emknjh" name="Rejected" sourceRef="architecture-plan-assessment-decision" targetRef="prepare-architecture-plan">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${decisionFormArchitecturePlan == constantDecisionFormRejected}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_0rygfql" name="Cancelled" sourceRef="architecture-plan-assessment-decision" targetRef="EndEvent_02rck8b">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${decisionFormArchitecturePlan == constantDecisionFormCancelled}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:userTask id="prepare-architecture-plan" name="Prepare Architecture Plan" camunda:candidateGroups="${owner}">
      <bpmn:extensionElements>
        <camunda:taskListener event="complete">
          <camunda:script scriptFormat="javascript"><![CDATA[// Form States
task.execution.setVariable("stateFormArchitecturePlan", constantStateFormSubmitted);
task.execution.setVariable("stateFormArchitecturePlanAssessment", constantStateFormUnlocked);
]]></camunda:script>
        </camunda:taskListener>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_1181hdz</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_0emknjh</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0dqnycx</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="assess-architecture-plan" name="Assess Architecture Plan" camunda:candidateGroups="scic">
      <bpmn:extensionElements>
        <camunda:taskListener event="complete">
          <camunda:script scriptFormat="javascript"><![CDATA[switch (decisionFormArchitecturePlan) {

   case constantDecisionFormApproved:

      task.execution.setVariable("stateEntity", constantStateEntityApproved);

      task.execution.setVariable("stateStepArchitecturePlan", constantStateStepDone);

      task.execution.setVariable("stateFormArchitecturePlan", constantStateFormDone);
      task.execution.setVariable("stateFormArchitecturePlanAssessment", constantStateFormDone);

      break;

   case constantDecisionFormRejected:

      task.execution.setVariable("stateFormArchitecturePlan",  constantStateFormRejected);
      task.execution.setVariable("stateFormArchitecturePlanAssessment", constantStateFormLocked);

      break;

   case constantDecisionFormCancelled:

      task.execution.setVariable("stateEntity", constantStateFormCancelled);

      task.execution.setVariable("stateStepArchitecturePlan", constantStateStepCancelled);

      task.execution.setVariable("stateFormArchitecturePlan", constantStateFormDone);
      task.execution.setVariable("stateFormArchitecturePlanAssessment", constantStateFormCancelled);

      break;

   default:

       throw new Error('Unexpected value for the "decisionFormArchitecturePlan" variable: "'+decisionFormArchitecturePlan+'".');
}
]]></camunda:script>
        </camunda:taskListener>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_0dqnycx</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_144rfxb</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="SequenceFlow_0dqnycx" sourceRef="prepare-architecture-plan" targetRef="assess-architecture-plan" />
    <bpmn:userTask id="prepare-business-case" name="Prepare Business Case" camunda:formKey="business-case" camunda:candidateGroups="${owner}">
      <bpmn:extensionElements>
        <camunda:formData />
        <camunda:taskListener event="complete">
          <camunda:script scriptFormat="javascript"><![CDATA[// Form States
task.execution.setVariable("stateFormBusinessCase", constantStateFormSubmitted);
task.execution.setVariable("stateFormBusinessCaseAssessment", constantStateFormUnlocked);
]]></camunda:script>
        </camunda:taskListener>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_02678ki</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_0swmovm</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_10mvl52</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="assess-business-case" name="Assess Business Case" camunda:formKey="business-case-assessment" camunda:candidateGroups="scic">
      <bpmn:extensionElements>
        <camunda:taskListener event="complete">
          <camunda:script scriptFormat="javascript"><![CDATA[switch (decisionFormBusinessCase) {

   case constantDecisionFormApproved:

      task.execution.setVariable("stateEntity", constantStateEntityDefined);

      task.execution.setVariable("stateStepBusinessCase", constantStateStepDone);
      task.execution.setVariable("stateStepArchitecturePlan", constantStateStepUnlocked);

      task.execution.setVariable("stateFormBusinessCase", constantStateFormDone);
      task.execution.setVariable("stateFormBusinessCaseAssessment", constantStateFormDone);
      task.execution.setVariable("stateFormArchitecturePlan", constantStateFormUnlocked);

      break;

   case constantDecisionFormRejected:

      task.execution.setVariable("stateFormBusinessCase",  constantStateFormRejected);
      task.execution.setVariable("stateFormBusinessCaseAssessment", constantStateFormLocked);

      break;

   case constantDecisionFormCancelled:

      task.execution.setVariable("stateEntity", constantStateFormCancelled);

      task.execution.setVariable("stateStepBusinessCase", constantStateStepCancelled);

      task.execution.setVariable("stateFormBusinessCase", constantStateFormDone);
      task.execution.setVariable("stateFormBusinessCaseAssessment", constantStateFormCancelled);

      break;

   default:

       throw new Error('Unexpected value for the "decisionFormBusinessCase" variable: "'+decisionFormBusinessCase+'".');
}



]]></camunda:script>
        </camunda:taskListener>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_10mvl52</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0stz2fj</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:startEvent id="StartEvent_1" name="">
      <bpmn:extensionElements>
        <camunda:executionListener event="start">
          <camunda:script scriptFormat="javascript"><![CDATA[// Process Constants

// Entity States
execution.setVariable("constantStateEntityNew", "new");
execution.setVariable("constantStateEntityDefined", "defined");
execution.setVariable("constantStateEntityApproved", "approved");
execution.setVariable("constantStateEntityCancelled", "cancelled");

// Step States
execution.setVariable("constantStateStepLocked", "locked");
execution.setVariable("constantStateStepUnlocked", "unlocked");
execution.setVariable("constantStateStepDone", "done");
execution.setVariable("constantStateStepCancelled", "cancelled");

// Form States
execution.setVariable("constantStateFormLocked", "locked");  
execution.setVariable("constantStateFormUnlocked", "unlocked");  
execution.setVariable("constantStateFormSubmitted", "submitted");  
execution.setVariable("constantStateFormRejected", "rejected");  
execution.setVariable("constantStateFormDone", "done");  
execution.setVariable("constantStateFormCancelled", "cancelled");  

// Form Decisions
execution.setVariable("constantDecisionFormApproved", "approved");  
execution.setVariable("constantDecisionFormRejected", "rejected");  
execution.setVariable("constantDecisionFormCancelled", "cancelled");  
execution.setVariable("constantDecisionFormNone", "none");  

// Process Variables

// Step States
execution.setVariable("stateStepBusinessCase", constantStateStepUnlocked);
execution.setVariable("stateStepArchitecturePlan", constantStateStepLocked);

// Form States
execution.setVariable("stateFormBusinessCase", constantStateFormUnlocked);
execution.setVariable("stateFormBusinessCaseAssessment", constantStateFormLocked);
execution.setVariable("stateFormArchitecturePlan", constantStateFormLocked);
execution.setVariable("stateFormArchitecturePlanAssessment", constantStateFormLocked);

// Decisions
execution.setVariable("decisionFormBusinessCase", constantDecisionFormNone);
execution.setVariable("decisionFormArchitecturePlan", constantDecisionFormNone);
]]></camunda:script>
        </camunda:executionListener>
      </bpmn:extensionElements>
      <bpmn:outgoing>SequenceFlow_0swmovm</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:sequenceFlow id="SequenceFlow_0swmovm" sourceRef="StartEvent_1" targetRef="prepare-business-case" />
    <bpmn:sequenceFlow id="SequenceFlow_10mvl52" sourceRef="prepare-business-case" targetRef="assess-business-case" />
  </bpmn:process>
  <bpmn:message id="Message_1qm4sjc" name="Message_17o8lnm" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_1owbzst">
      <bpmndi:BPMNShape id="Participant_02hnwqb_di" bpmnElement="Participant_02hnwqb">
        <dc:Bounds x="62" y="131" width="1512" height="482" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="UserTask_1fi3xxl_di" bpmnElement="assess-business-case">
        <dc:Bounds x="323" y="249" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ExclusiveGateway_0olg0zg_di" bpmnElement="business-case-assessment-decision" isMarkerVisible="true">
        <dc:Bounds x="520" y="264" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="463" y="235" width="76" height="36" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">
        <dc:Bounds x="198" y="462" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="204" y="498" width="25" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="UserTask_1y25eey_di" bpmnElement="prepare-business-case">
        <dc:Bounds x="323" y="440" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_10mvl52_di" bpmnElement="SequenceFlow_10mvl52">
        <di:waypoint xsi:type="dc:Point" x="373" y="440" />
        <di:waypoint xsi:type="dc:Point" x="373" y="329" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="343" y="379" width="90" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0stz2fj_di" bpmnElement="SequenceFlow_0stz2fj">
        <di:waypoint xsi:type="dc:Point" x="423" y="289" />
        <di:waypoint xsi:type="dc:Point" x="520" y="289" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="426.5" y="268" width="90" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_144rfxb_di" bpmnElement="SequenceFlow_144rfxb">
        <di:waypoint xsi:type="dc:Point" x="925" y="289" />
        <di:waypoint xsi:type="dc:Point" x="1090" y="289" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="962.5" y="268" width="90" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0dqnycx_di" bpmnElement="SequenceFlow_0dqnycx">
        <di:waypoint xsi:type="dc:Point" x="875" y="440" />
        <di:waypoint xsi:type="dc:Point" x="875" y="385" />
        <di:waypoint xsi:type="dc:Point" x="875" y="385" />
        <di:waypoint xsi:type="dc:Point" x="875" y="329" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="845" y="379" width="90" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1181hdz_di" bpmnElement="SequenceFlow_1181hdz">
        <di:waypoint xsi:type="dc:Point" x="545" y="264" />
        <di:waypoint xsi:type="dc:Point" x="545" y="227" />
        <di:waypoint xsi:type="dc:Point" x="713" y="227" />
        <di:waypoint xsi:type="dc:Point" x="713" y="480" />
        <di:waypoint xsi:type="dc:Point" x="825" y="480" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="545" y="207.16230366492158" width="50" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_02678ki_di" bpmnElement="SequenceFlow_02678ki">
        <di:waypoint xsi:type="dc:Point" x="545" y="314" />
        <di:waypoint xsi:type="dc:Point" x="545" y="480" />
        <di:waypoint xsi:type="dc:Point" x="423" y="480" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="556" y="308" width="45" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0swmovm_di" bpmnElement="SequenceFlow_0swmovm">
        <di:waypoint xsi:type="dc:Point" x="234" y="480" />
        <di:waypoint xsi:type="dc:Point" x="275" y="480" />
        <di:waypoint xsi:type="dc:Point" x="275" y="480" />
        <di:waypoint xsi:type="dc:Point" x="323" y="480" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="245" y="474" width="90" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Lane_0xteu9y_di" bpmnElement="Lane_0xteu9y">
        <dc:Bounds x="92" y="131" width="1482" height="247" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_1h7n5ox_di" bpmnElement="Lane_1h7n5ox">
        <dc:Bounds x="92" y="378" width="1482" height="235" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ExclusiveGateway_1cg3z13_di" bpmnElement="architecture-plan-assessment-decision" isMarkerVisible="true">
        <dc:Bounds x="1090" y="264" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1013" y="246" width="88" height="36" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_108qq7v_di" bpmnElement="SequenceFlow_108qq7v">
        <di:waypoint xsi:type="dc:Point" x="1115" y="264" />
        <di:waypoint xsi:type="dc:Point" x="1115" y="224" />
        <di:waypoint xsi:type="dc:Point" x="1456" y="224" />
        <di:waypoint xsi:type="dc:Point" x="1456" y="462" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1115" y="203.69417580055875" width="50" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0emknjh_di" bpmnElement="SequenceFlow_0emknjh">
        <di:waypoint xsi:type="dc:Point" x="1115" y="314" />
        <di:waypoint xsi:type="dc:Point" x="1115" y="480" />
        <di:waypoint xsi:type="dc:Point" x="925" y="480" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1127" y="308" width="45" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_1ldjwvv_di" bpmnElement="prepare-architecture-plan">
        <dc:Bounds x="825" y="440" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="UserTask_11nca8u_di" bpmnElement="assess-architecture-plan">
        <dc:Bounds x="825" y="249" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_19jlgwk_di" bpmnElement="EndEvent_02rck8b">
        <dc:Bounds x="1438" y="462" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1413" y="502" width="88" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0rygfql_di" bpmnElement="SequenceFlow_0rygfql">
        <di:waypoint xsi:type="dc:Point" x="1140" y="289" />
        <di:waypoint xsi:type="dc:Point" x="1207" y="289" />
        <di:waypoint xsi:type="dc:Point" x="1207" y="480" />
        <di:waypoint xsi:type="dc:Point" x="1438" y="480" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1144.5" y="267.7760115606937" width="51" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0k7m7l1_di" bpmnElement="SequenceFlow_0k7m7l1">
        <di:waypoint xsi:type="dc:Point" x="570" y="289" />
        <di:waypoint xsi:type="dc:Point" x="628" y="289" />
        <di:waypoint xsi:type="dc:Point" x="628" y="566" />
        <di:waypoint xsi:type="dc:Point" x="1456" y="566" />
        <di:waypoint xsi:type="dc:Point" x="1456" y="498" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="570.1588235294117" y="267.4999999999999" width="51" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
